/*! echo.js v1.6.0 | (c) 2015 @toddmotto | https://github.com/toddmotto/echo */
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,o,n,r,c={},i=function(){},a=function(t,e){var o=t.getBoundingClientRect();return o.right>=e.l&&o.bottom>=e.t&&o.left<=e.r&&o.top<=e.b},l=function(){clearTimeout(o),o=setTimeout(c.render,n)};return c.isInitialized=!1,c.init=function(t){c.isInitialized=!0,console.log("echo init called"),t=t||{};var o=t.offset||0,a=t.offsetVertical||o,l=t.offsetHorizontal||o,d=function(t,e){return parseInt(t||e,10)};e={t:d(t.offsetTop,a),b:d(t.offsetBottom,a),l:d(t.offsetLeft,l),r:d(t.offsetRight,l)},n=d(t.throttle,250),r=!!t.unload,i=t.callback||i,c.render(),c.attach()},c.render=function(){var o=document.querySelectorAll("img[data-echo]"),n=o.length;console.log("render node length:",n);for(var l,d,u={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},f=0;n>f;f++)d=o[f],a(d,u)?(r&&d.setAttribute("data-echo-placeholder",d.src),d.src=d.getAttribute("data-echo"),r||d.removeAttribute("data-echo"),i(d,"load")):r&&(l=d.getAttribute("data-echo-placeholder"))&&(d.src=l,d.removeAttribute("data-echo-placeholder"),i(d,"unload"));n||c.detach()},c.attach=function(){document.addEventListener?(t.addEventListener("scroll",l,!1),t.addEventListener("load",l,!1)):(t.attachEvent("onscroll",l),t.attachEvent("onload",l))},c.detach=function(){document.removeEventListener?t.removeEventListener("scroll",l):t.detachEvent("onscroll",l),clearTimeout(o)},c});